-- Schema pushellp
-- -----------------------------------------------------
-- CREATE SCHEMA IF NOT EXISTS pushellp;
-- -----------------------------------------------------
-- Table  pushellp . INDIVIDUAL 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS INDIVIDUAL (
  idINDIVIDUAL INT GENERATED BY DEFAULT AS IDENTITY,
  pseudo VARCHAR(30) NULL,
  email VARCHAR(45) NULL,
  birthday TIMESTAMP NULL,
  status VARCHAR(10) NULL,
  password VARCHAR(255) NULL,
  salt VARCHAR(255) NULL,
  registerDate TIMESTAMP NULL,
  INDIVIDUAL_idINDIVIDUAL INT NULL,
  PRIMARY KEY (idINDIVIDUAL),
  CONSTRAINT fk_INDIVIDUAL_INDIVIDUAL1 FOREIGN KEY (INDIVIDUAL_idINDIVIDUAL) REFERENCES INDIVIDUAL (idINDIVIDUAL) ON DELETE NO ACTION ON UPDATE NO ACTION
);
-- -----------------------------------------------------
-- Table  pushellp . POST 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS POST (
  idPOST INT GENERATED BY DEFAULT AS IDENTITY,
  title VARCHAR(255) NULL,
  content TEXT NULL,
  srcImage VARCHAR(255) NULL,
  --image BLOB NULL,
  numberPush INT NULL,
  creationDate TIMESTAMP NULL,
  endLifeData TIMESTAMP NULL,
  isReceivedReport BIT NULL,
  PRIMARY KEY (idPOST)
);
-- -----------------------------------------------------
-- Table  pushellp . SECTION 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS SECTION (
  idSECTION INT GENERATED BY DEFAULT AS IDENTITY,
  title VARCHAR(130) NULL,
  description TEXT NULL,
  srcIcon VARCHAR(255) NULL,
  --icon BLOB NULL,
  POST_idPOST INT NOT NULL,
  PRIMARY KEY (idSECTION),
  CONSTRAINT fk_SECTION_POST1 FOREIGN KEY (POST_idPOST) REFERENCES POST (idPOST) ON DELETE NO ACTION ON UPDATE NO ACTION
);

-- -----------------------------------------------------
-- Table  pushellp . APPLICATION 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS APPLICATION (
  platform VARCHAR(7) NOT NULL,
  PRIMARY KEY (platform)
);

-- -----------------------------------------------------
-- Table  pushellp . TICKET 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS TICKET (
  idTICKET INT GENERATED BY DEFAULT AS IDENTITY,
  title VARCHAR(255) NULL,
  creationDate TIMESTAMP NULL,
  updateDate TIMESTAMP NULL,
  deadline TIMESTAMP NULL,
  status VARCHAR(8) NULL,
  description TEXT NULL,
  priority CHAR(5) NULL,
  INDIVIDUAL_idINDIVIDUAL INT NULL,
  APPLICATION_platformAPPLICATION VARCHAR(7) NOT NULL,
  PRIMARY KEY (idTICKET),
  CONSTRAINT fk_TICKET_INDIVIDUAL1 FOREIGN KEY (INDIVIDUAL_idINDIVIDUAL) REFERENCES INDIVIDUAL (idINDIVIDUAL) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_TICKET_APPLICATION1 FOREIGN KEY (APPLICATION_platformAPPLICATION) REFERENCES APPLICATION (platform) ON DELETE NO ACTION ON UPDATE NO ACTION
);
-- -----------------------------------------------------
-- Table  pushellp . COMMENTARY 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS COMMENTARY (
  idCOMMENTARY INT GENERATED BY DEFAULT AS IDENTITY,
  text TEXT NULL,
  datecreation TIMESTAMP NULL,
  INDIVIDUAL_idINDIVIDUAL INT NOT NULL,
  TICKET_idTICKET INT NULL,
  POST_idPOST INT NULL,
  PRIMARY KEY (idCOMMENTARY),
  CONSTRAINT fk_COMMENTARY_INDIVIDUAL FOREIGN KEY (INDIVIDUAL_idINDIVIDUAL) REFERENCES INDIVIDUAL (idINDIVIDUAL) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_COMMENTARY_TICKET1 FOREIGN KEY (TICKET_idTICKET) REFERENCES TICKET (idTICKET) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_COMMENTARY_POST1 FOREIGN KEY (POST_idPOST) REFERENCES POST (idPOST) ON DELETE NO ACTION ON UPDATE NO ACTION
);
-- -----------------------------------------------------
-- Table  pushellp . COLOR_THEME 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS COLOR_THEME (
  idCOLOR_THEME INT GENERATED BY DEFAULT AS IDENTITY,
  color INT NULL,
  PRIMARY KEY (idCOLOR_THEME)
);

-- -----------------------------------------------------
-- Table  pushellp . INDIVIDUAL_has_POST 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS INDIVIDUAL_has_POST (
  INDIVIDUAL_idINDIVIDUAL INT NOT NULL,
  POST_idPOST INT NOT NULL,
  PRIMARY KEY (INDIVIDUAL_idINDIVIDUAL, POST_idPOST),
  CONSTRAINT fk_INDIVIDUAL_has_POST_INDIVIDUAL1 FOREIGN KEY (INDIVIDUAL_idINDIVIDUAL) REFERENCES INDIVIDUAL (idINDIVIDUAL) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_INDIVIDUAL_has_POST_POST1 FOREIGN KEY (POST_idPOST) REFERENCES POST (idPOST) ON DELETE NO ACTION ON UPDATE NO ACTION
);
-- -----------------------------------------------------
-- Table  pushellp . INDIVIDUAL_has_TICKET 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS INDIVIDUAL_has_TICKET (
  INDIVIDUAL_idINDIVIDUAL INT NOT NULL,
  TICKET_idTICKET INT NOT NULL,
  PRIMARY KEY (INDIVIDUAL_idINDIVIDUAL, TICKET_idTICKET),
  CONSTRAINT fk_INDIVIDUAL_has_TICKET_INDIVIDUAL1 FOREIGN KEY (INDIVIDUAL_idINDIVIDUAL) REFERENCES INDIVIDUAL (idINDIVIDUAL) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_INDIVIDUAL_has_TICKET_TICKET1 FOREIGN KEY (TICKET_idTICKET) REFERENCES TICKET (idTICKET) ON DELETE NO ACTION ON UPDATE NO ACTION
);
-- -----------------------------------------------------
-- Table  pushellp . APPLICATION_has_COLOR_THEME 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS APPLICATION_has_COLOR_THEME (
  APPLICATION_platformAPPLICATION VARCHAR(7) NOT NULL,
  COLOR_THEME_idCOLOR_THEME INT NOT NULL,
  PRIMARY KEY (
    APPLICATION_platformAPPLICATION,
    COLOR_THEME_idCOLOR_THEME
  ),
  CONSTRAINT fk_APPLICATION_has_COLOR_THEME_APPLICATION1 FOREIGN KEY (APPLICATION_platformAPPLICATION) REFERENCES APPLICATION (platform) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_APPLICATION_has_COLOR_THEME_COLOR_THEME1 FOREIGN KEY (COLOR_THEME_idCOLOR_THEME) REFERENCES COLOR_THEME (idCOLOR_THEME) ON DELETE NO ACTION ON UPDATE NO ACTION
);
-- -----------------------------------------------------
-- Table  pushellp . APPLICATION_has_INDIVIDUAL 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS APPLICATION_has_INDIVIDUAL (
  APPLICATION_platformAPPLICATION VARCHAR(7) NOT NULL,
  INDIVIDUAL_idINDIVIDUAL INT NOT NULL,
  PRIMARY KEY (APPLICATION_platformAPPLICATION, INDIVIDUAL_idINDIVIDUAL),
  CONSTRAINT fk_APPLICATION_has_INDIVIDUAL_APPLICATION1 FOREIGN KEY (APPLICATION_platformAPPLICATION) REFERENCES APPLICATION (platform) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_APPLICATION_has_INDIVIDUAL_INDIVIDUAL1 FOREIGN KEY (INDIVIDUAL_idINDIVIDUAL) REFERENCES INDIVIDUAL (idINDIVIDUAL) ON DELETE NO ACTION ON UPDATE NO ACTION
);
-- -----------------------------------------------------
-- Table  pushellp . INDIVIDUAL_has_SECTION 
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS INDIVIDUAL_has_SECTION (
  INDIVIDUAL_idINDIVIDUAL INT NOT NULL,
  SECTION_idSECTION INT NOT NULL,
  PRIMARY KEY (INDIVIDUAL_idINDIVIDUAL, SECTION_idSECTION),
  CONSTRAINT fk_INDIVIDUAL_has_SECTION_INDIVIDUAL1 FOREIGN KEY (INDIVIDUAL_idINDIVIDUAL) REFERENCES INDIVIDUAL (idINDIVIDUAL) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT fk_INDIVIDUAL_has_SECTION_SECTION1 FOREIGN KEY (SECTION_idSECTION) REFERENCES SECTION (idSECTION) ON DELETE NO ACTION ON UPDATE NO ACTION
);